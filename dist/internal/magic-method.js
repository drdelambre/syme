"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],o=!0,a=!1,n=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);o=!0);}catch(e){a=!0,n=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw n}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_model=require("../model.js"),_model2=_interopRequireDefault(_model),_magicArray=require("./magic-array.js"),_magicArray2=_interopRequireDefault(_magicArray);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function MagicMethod(e,c,y,d){Object.defineProperty(e,y,{configurable:!0,get:function(){return c[y].value},set:function(e){var r=c[y].value,t="[object Array]"===Object.prototype.toString.call(c[y].default),o=e,a=!0,n=void 0,i=void 0,l=void 0;if(t){if(c[y].type)for(i=0;i<e.length;i++)l=e[i],"[object Array]"!==Object.prototype.toString.call(e[i])&&"function"==typeof e[i].fill||(e[i]=new c[y].type(l))}else!c[y].type||!(c[y].type instanceof _model2.default||c[y].type.prototype instanceof _model2.default)||e instanceof c[y].type||(o=new c[y].type(e));for(i=0;i<c[y].before.length;i++){var u=c[y].before[i](o),f=_slicedToArray(u,2);if(n=f[0],o=f[1],!(a=a&&!n))return}c[y].value!==o&&(t&&!o.hasOwnProperty("_def")?c[y].value=new _magicArray2.default(c,y,d,o):c[y].value=o,d.add(y,{old:r,new:c[y].value}))}})}exports.default=MagicMethod;