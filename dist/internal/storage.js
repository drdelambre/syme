'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj;};function testForLocalStorage(){/* istanbul ignore if: not testing server yet */if(typeof window==='undefined'||!window.document){return false;}var uid=''+Date.now();try{window.localStorage.setItem(uid,uid);var works=window.localStorage.getItem(uid)===uid;window.localStorage.removeItem(uid);return works;}catch(exception){/* istanbul ignore next: client is speced correctly */return false;}}function testForSessionStorage(){/* istanbul ignore if: not testing server yet */if(typeof window==='undefined'||!window.document){return false;}var uid=''+Date.now();try{window.sessionStorage.setItem(uid,uid);var works=window.sessionStorage.getItem(uid)===uid;window.sessionStorage.removeItem(uid);return works;}catch(exception){/* istanbul ignore next: client is speced correctly */return false;}}function generateMemoryStore(){/* istanbul ignore if: not testing server yet */if(typeof window==='undefined'||!window.document){var _ret=function(){var getNamespace=require('continuation-local-storage').getNamespace;return{v:{get:function get(key){var namespace=getNamespace('ServerState');if(!namespace.get){throw new Error(['','Server misconfigured:','\tPlease make sure to create the namespace before using the','\tcache system on the server.','\thttps://github.com/drdelambre/syme#cache-serverside',''].join('\n'));}return namespace.get(key);},set:function set(key,val){var namespace=getNamespace('ServerState');if(!namespace.set){throw new Error(['','Server misconfigured:','\tPlease make sure to create the namespace before using the','\tcache system on the server.','\thttps://github.com/drdelambre/syme#cache-serverside',''].join('\n'));}return namespace.set(key,val);},clear:function clear(){}}};}();if((typeof _ret==='undefined'?'undefined':_typeof(_ret))==="object")return _ret.v;}var state={};return{get:function get(key){return state[key];},set:function set(key,val){state[key]=val;},clear:function clear(){var ni=void 0;for(ni in state){delete state[ni];}}};}function generateSessionStore(){/* istanbul ignore else: this always returns true on phantom */if(testForSessionStorage()){return{get:function get(key){var val=window.sessionStorage.getItem(key);if(val){return JSON.parse(val);}return null;},set:function set(key,val){window.sessionStorage.setItem(key,JSON.stringify(val));},clear:function clear(){window.sessionStorage.clear();}};}/* istanbul ignore next: we can assume this is safe? */return generateMemoryStore();}function generateLocalStore(){/* istanbul ignore else: this always returns true on phantom */if(testForLocalStorage()){return{get:function get(key){var val=window.localStorage.getItem(key);if(val){return JSON.parse(val);}return null;},set:function set(key,val){window.localStorage.setItem(key,JSON.stringify(val));},clear:function clear(){window.localStorage.clear();}};}/* istanbul ignore next: we can assume this is safe? */return generateSessionStore();}var storage={memory:generateMemoryStore(),local:generateLocalStore(),session:generateSessionStore()};exports.testForLocalStorage=testForLocalStorage;exports.testForSessionStorage=testForSessionStorage;exports.default=storage;