"use strict";function testForLocalStorage(){if("undefined"==typeof window||!window.document)return!1;var e=""+Date.now();try{window.localStorage.setItem(e,e);var t=window.localStorage.getItem(e)===e;return window.localStorage.removeItem(e),t}catch(e){return!1}}function testForSessionStorage(){if("undefined"==typeof window||!window.document)return!1;var e=""+Date.now();try{window.sessionStorage.setItem(e,e);var t=window.sessionStorage.getItem(e)===e;return window.sessionStorage.removeItem(e),t}catch(e){return!1}}function generateMemoryStore(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"memory";if("undefined"==typeof window||!window.document){var a=require("continuation-local-storage").getNamespace;return{get:function(e){var t=a("ServerState");if(!t.get)throw new Error(["","Server misconfigured:","\tPlease make sure to create the namespace before","\tusing the cache system on the server.","\thttps://github.com/drdelambre/syme#cache-serverside",""].join("\n"));return(t.get(n)||{})[e]},set:function(e,t){var r=a("ServerState");if(!r.get)throw new Error(["","Server misconfigured:","\tPlease make sure to create the namespace before","\tusing the cache system on the server.","\thttps://github.com/drdelambre/syme#cache-serverside",""].join("\n"));var o=r.get(n)||{};return o[e]=t,r.set(n,o)},clear:function(){}}}var r={};return{get:function(e){return r[e]},set:function(e,t){r[e]=t},clear:function(){var e=void 0;for(e in r)delete r[e]}}}function generateSessionStore(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"session";return testForSessionStorage()?{get:function(e){var t=window.sessionStorage.getItem(e);return t?JSON.parse(t):null},set:function(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))},clear:function(){window.sessionStorage.clear()}}:generateMemoryStore(e)}function generateLocalStore(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"local";return testForLocalStorage()?{get:function(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):null},set:function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},clear:function(){window.localStorage.clear()}}:generateSessionStore(e)}Object.defineProperty(exports,"__esModule",{value:!0});var storage={memory:generateMemoryStore(),local:generateLocalStore(),session:generateSessionStore()};exports.testForLocalStorage=testForLocalStorage,exports.testForSessionStorage=testForSessionStorage,exports.default=storage;